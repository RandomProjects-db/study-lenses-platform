<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù Exercise Generator - Study Lenses</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0f0f23;
            color: #ccc;
            min-height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 { color: white; font-size: 24px; }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary { background: #48bb78; color: white; }
        .btn-primary:hover { background: #38a169; transform: translateY(-2px); }
        .btn-secondary { background: #4a5568; color: white; }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr 1.2fr;
            gap: 20px;
            padding: 20px;
            height: calc(100vh - 80px);
        }
        
        .panel {
            background: #1a1a2e;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .panel-header {
            background: #16213e;
            padding: 15px 20px;
            font-weight: 600;
            border-bottom: 1px solid #333;
        }
        
        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .code-editor {
            width: 100%;
            height: 100%;
            background: #0d1117;
            color: #c9d1d9;
            border: none;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
        }
        
        .trace-item {
            background: #16213e;
            margin: 6px 0;
            padding: 10px 12px;
            border-radius: 6px;
            border-left: 3px solid #667eea;
            font-family: monospace;
            font-size: 13px;
        }
        
        .trace-call { border-left-color: #48bb78; }
        .trace-return { border-left-color: #f6ad55; }
        
        .quiz-card {
            background: #16213e;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .quiz-card.correct { border-color: #48bb78; background: rgba(72, 187, 120, 0.1); }
        .quiz-card.incorrect { border-color: #f56565; background: rgba(245, 101, 101, 0.1); }
        
        .quiz-type {
            font-size: 11px;
            text-transform: uppercase;
            color: #667eea;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .quiz-question {
            font-size: 16px;
            margin-bottom: 15px;
            color: #fff;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .quiz-option {
            padding: 12px 16px;
            background: #0d1117;
            border: 2px solid #333;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quiz-option:hover { border-color: #667eea; background: #1a1a2e; }
        .quiz-option.selected { border-color: #667eea; background: rgba(102, 126, 234, 0.2); }
        .quiz-option.correct-answer { border-color: #48bb78; background: rgba(72, 187, 120, 0.2); }
        .quiz-option.wrong-answer { border-color: #f56565; background: rgba(245, 101, 101, 0.2); }
        
        .quiz-input {
            width: 100%;
            padding: 12px 16px;
            background: #0d1117;
            border: 2px solid #333;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
        }
        
        .quiz-input:focus { outline: none; border-color: #667eea; }
        
        .quiz-feedback {
            margin-top: 12px;
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
        }
        
        .feedback-correct { background: rgba(72, 187, 120, 0.2); color: #48bb78; }
        .feedback-incorrect { background: rgba(245, 101, 101, 0.2); color: #f56565; }
        
        .sortable-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .sortable-item {
            padding: 12px 16px;
            background: #0d1117;
            border: 2px solid #333;
            border-radius: 8px;
            cursor: grab;
            user-select: none;
            font-family: monospace;
        }
        
        .sortable-item:active { cursor: grabbing; }
        .sortable-item.dragging { opacity: 0.5; border-color: #667eea; }
        
        .check-btn {
            margin-top: 12px;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .check-btn:hover { background: #5a67d8; }
        
        .stats-bar {
            display: flex;
            gap: 20px;
            padding: 10px 20px;
            background: #16213e;
            font-size: 13px;
        }
        
        .stat { display: flex; gap: 6px; }
        .stat-value { color: #667eea; font-weight: 700; }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìù Exercise Generator</h1>
        <div style="display: flex; gap: 10px; align-items: center;">
            <button class="btn btn-primary" onclick="runAndGenerate()">‚ñ∂Ô∏è Template Quizzes</button>
            <button class="btn btn-primary" onclick="runWithLLM()" style="background: #9f7aea;">ü§ñ AI Quizzes</button>
            <a href="index.html" class="btn btn-secondary">‚Üê Back</a>
        </div>
    </div>
    
    <div class="container">
        <div class="panel">
            <div class="panel-header">üìù Code Editor</div>
            <div class="panel-content" style="padding: 0;">
                <textarea class="code-editor" id="codeEditor">const fibonacci = trace(function(n) {
    if (n <= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}, 'fibonacci');

const factorial = trace(function(n) {
    if (n <= 1) return 1;
    return n * factorial(n - 1);
}, 'factorial');

// Test
const fib5 = fibonacci(5);
const fact4 = factorial(4);</textarea>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">üîç Execution Trace</div>
            <div class="stats-bar">
                <div class="stat">Calls: <span class="stat-value" id="callCount">0</span></div>
                <div class="stat">Returns: <span class="stat-value" id="returnCount">0</span></div>
                <div class="stat">Max Depth: <span class="stat-value" id="maxDepth">0</span></div>
            </div>
            <div class="panel-content" id="traceOutput">
                <div class="empty-state">Run code to see trace</div>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">üéØ Generated Exercises</div>
            <div class="stats-bar">
                <div class="stat">Score: <span class="stat-value" id="score">0</span>/<span id="total">0</span></div>
            </div>
            <div class="panel-content" id="exerciseOutput">
                <div class="empty-state">Run code to generate exercises</div>
            </div>
        </div>
    </div>

    <script>
        let traceData = [];
        let callStack = [];
        let stats = { calls: 0, returns: 0, maxDepth: 0 };
        let score = 0;
        let totalQuizzes = 0;
        
        function trace(fn, name) {
            return function(...args) {
                const depth = callStack.length;
                stats.calls++;
                stats.maxDepth = Math.max(stats.maxDepth, depth);
                callStack.push(name);
                
                traceData.push({
                    type: 'call',
                    name: name,
                    args: args,
                    depth: depth,
                    timestamp: traceData.length
                });
                
                let result;
                try {
                    result = fn.apply(this, args);
                } catch (e) {
                    callStack.pop();
                    throw e;
                }
                
                stats.returns++;
                traceData.push({
                    type: 'return',
                    name: name,
                    value: result,
                    depth: depth,
                    timestamp: traceData.length
                });
                
                callStack.pop();
                return result;
            };
        }
        
        function runAndGenerate() {
            // Reset
            traceData = [];
            callStack = [];
            stats = { calls: 0, returns: 0, maxDepth: 0 };
            score = 0;
            totalQuizzes = 0;
            
            const code = document.getElementById('codeEditor').value;
            
            try {
                eval(code);
                
                // Update stats
                document.getElementById('callCount').textContent = stats.calls;
                document.getElementById('returnCount').textContent = stats.returns;
                document.getElementById('maxDepth').textContent = stats.maxDepth;
                
                // Render trace
                renderTrace();
                
                // Generate exercises
                generateExercises();
                
            } catch (e) {
                document.getElementById('traceOutput').innerHTML = 
                    `<div class="quiz-feedback feedback-incorrect">Error: ${e.message}</div>`;
            }
        }
        
        function renderTrace() {
            const output = document.getElementById('traceOutput');
            output.innerHTML = traceData.map(t => {
                const indent = '  '.repeat(t.depth);
                const icon = t.type === 'call' ? '‚Üí' : '‚Üê';
                const content = t.type === 'call' 
                    ? `${t.name}(${t.args.join(', ')})`
                    : `${t.name}() = ${t.value}`;
                return `<div class="trace-item trace-${t.type}">${indent}${icon} ${content}</div>`;
            }).join('');
        }
        
        function generateExercises() {
            const output = document.getElementById('exerciseOutput');
            const quizzes = [];
            
            // Get unique function names and their calls
            const calls = traceData.filter(t => t.type === 'call');
            const returns = traceData.filter(t => t.type === 'return');
            const funcNames = [...new Set(calls.map(c => c.name))];
            
            // 1. Call Count Quiz
            if (funcNames.length > 0) {
                const func = funcNames[0];
                const count = calls.filter(c => c.name === func).length;
                const options = shuffleArray([count, count + 2, count - 1, count * 2].filter(n => n > 0));
                quizzes.push(createMultipleChoice(
                    'Call Count',
                    `How many times was <code>${func}()</code> called?`,
                    options.slice(0, 4),
                    count
                ));
            }
            
            // 2. Return Value Quiz
            if (returns.length > 0) {
                const ret = returns[Math.floor(returns.length / 2)];
                const call = calls.find(c => c.name === ret.name && c.args.length > 0);
                if (call) {
                    const options = shuffleArray([ret.value, ret.value + 1, ret.value - 1, ret.value * 2]);
                    quizzes.push(createMultipleChoice(
                        'Return Value',
                        `What did <code>${ret.name}(${call.args.join(', ')})</code> return?`,
                        options.slice(0, 4),
                        ret.value
                    ));
                }
            }
            
            // 3. Argument Tracking Quiz
            if (calls.length >= 3) {
                const idx = Math.min(2, calls.length - 1);
                const call = calls[idx];
                if (call.args.length > 0) {
                    quizzes.push(createInputQuiz(
                        'Argument Tracking',
                        `What was the argument in the ${ordinal(idx + 1)} call to <code>${call.name}()</code>?`,
                        String(call.args[0])
                    ));
                }
            }
            
            // 4. Timeline Matching Quiz
            if (calls.length >= 2) {
                const first = calls[0];
                const second = calls[Math.min(1, calls.length - 1)];
                if (first.name !== second.name || first.args[0] !== second.args[0]) {
                    quizzes.push(createMultipleChoice(
                        'Timeline',
                        `Which happened first?`,
                        [
                            `${first.name}(${first.args.join(', ')})`,
                            `${second.name}(${second.args.join(', ')})`
                        ],
                        `${first.name}(${first.args.join(', ')})`
                    ));
                }
            }
            
            // 5. Execution Order Quiz (Parsons-style)
            if (calls.length >= 3) {
                const subset = calls.slice(0, Math.min(4, calls.length));
                const items = subset.map(c => `${c.name}(${c.args.join(', ')})`);
                quizzes.push(createSortableQuiz(
                    'Execution Order',
                    'Arrange these calls in the order they were executed:',
                    items
                ));
            }
            
            totalQuizzes = quizzes.length;
            document.getElementById('total').textContent = totalQuizzes;
            document.getElementById('score').textContent = score;
            
            output.innerHTML = quizzes.join('');
            
            // Initialize sortable
            initSortable();
        }
        
        function createMultipleChoice(type, question, options, correct) {
            const id = 'quiz-' + Math.random().toString(36).substr(2, 9);
            return `
                <div class="quiz-card" id="${id}" data-correct="${correct}">
                    <div class="quiz-type">${type}</div>
                    <div class="quiz-question">${question}</div>
                    <div class="quiz-options">
                        ${options.map(opt => `
                            <div class="quiz-option" onclick="checkAnswer('${id}', '${opt}', this)">${opt}</div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" style="display: none;"></div>
                </div>
            `;
        }
        
        function createInputQuiz(type, question, correct) {
            const id = 'quiz-' + Math.random().toString(36).substr(2, 9);
            return `
                <div class="quiz-card" id="${id}" data-correct="${correct}">
                    <div class="quiz-type">${type}</div>
                    <div class="quiz-question">${question}</div>
                    <input type="text" class="quiz-input" placeholder="Your answer..." 
                           onkeypress="if(event.key==='Enter') checkInputAnswer('${id}', this.value)">
                    <button class="check-btn" onclick="checkInputAnswer('${id}', this.previousElementSibling.value)">Check</button>
                    <div class="quiz-feedback" style="display: none;"></div>
                </div>
            `;
        }
        
        function createSortableQuiz(type, question, items) {
            const id = 'quiz-' + Math.random().toString(36).substr(2, 9);
            const correctOrder = [...items];
            const shuffled = shuffleArray([...items]);
            return `
                <div class="quiz-card" id="${id}" data-correct='${JSON.stringify(correctOrder)}'>
                    <div class="quiz-type">${type}</div>
                    <div class="quiz-question">${question}</div>
                    <div class="sortable-list" id="sortable-${id}">
                        ${shuffled.map(item => `
                            <div class="sortable-item" draggable="true">${item}</div>
                        `).join('')}
                    </div>
                    <button class="check-btn" onclick="checkSortableAnswer('${id}')">Check Order</button>
                    <div class="quiz-feedback" style="display: none;"></div>
                </div>
            `;
        }
        
        function checkAnswer(quizId, answer, element) {
            const card = document.getElementById(quizId);
            if (card.classList.contains('correct') || card.classList.contains('incorrect')) return;
            
            const correct = card.dataset.correct;
            const feedback = card.querySelector('.quiz-feedback');
            const options = card.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                if (opt.textContent == correct) opt.classList.add('correct-answer');
            });
            
            if (String(answer) === String(correct)) {
                card.classList.add('correct');
                element.classList.add('correct-answer');
                feedback.className = 'quiz-feedback feedback-correct';
                feedback.textContent = '‚úì Correct!';
                score++;
            } else {
                card.classList.add('incorrect');
                element.classList.add('wrong-answer');
                feedback.className = 'quiz-feedback feedback-incorrect';
                feedback.textContent = `‚úó Incorrect. The answer was ${correct}`;
            }
            
            feedback.style.display = 'block';
            document.getElementById('score').textContent = score;
        }
        
        function checkInputAnswer(quizId, answer) {
            const card = document.getElementById(quizId);
            if (card.classList.contains('correct') || card.classList.contains('incorrect')) return;
            
            const correct = card.dataset.correct;
            const feedback = card.querySelector('.quiz-feedback');
            
            if (String(answer).trim() === String(correct)) {
                card.classList.add('correct');
                feedback.className = 'quiz-feedback feedback-correct';
                feedback.textContent = '‚úì Correct!';
                score++;
            } else {
                card.classList.add('incorrect');
                feedback.className = 'quiz-feedback feedback-incorrect';
                feedback.textContent = `‚úó Incorrect. The answer was ${correct}`;
            }
            
            feedback.style.display = 'block';
            document.getElementById('score').textContent = score;
        }
        
        function checkSortableAnswer(quizId) {
            const card = document.getElementById(quizId);
            if (card.classList.contains('correct') || card.classList.contains('incorrect')) return;
            
            const correct = JSON.parse(card.dataset.correct);
            const list = document.getElementById('sortable-' + quizId);
            const items = [...list.querySelectorAll('.sortable-item')].map(el => el.textContent);
            const feedback = card.querySelector('.quiz-feedback');
            
            const isCorrect = JSON.stringify(items) === JSON.stringify(correct);
            
            if (isCorrect) {
                card.classList.add('correct');
                feedback.className = 'quiz-feedback feedback-correct';
                feedback.textContent = '‚úì Correct order!';
                score++;
            } else {
                card.classList.add('incorrect');
                feedback.className = 'quiz-feedback feedback-incorrect';
                feedback.textContent = `‚úó Incorrect. Correct order: ${correct.join(' ‚Üí ')}`;
            }
            
            feedback.style.display = 'block';
            document.getElementById('score').textContent = score;
        }
        
        function initSortable() {
            document.querySelectorAll('.sortable-list').forEach(list => {
                let draggedItem = null;
                
                list.querySelectorAll('.sortable-item').forEach(item => {
                    item.addEventListener('dragstart', () => {
                        draggedItem = item;
                        item.classList.add('dragging');
                    });
                    
                    item.addEventListener('dragend', () => {
                        item.classList.remove('dragging');
                        draggedItem = null;
                    });
                    
                    item.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        if (draggedItem && draggedItem !== item) {
                            const rect = item.getBoundingClientRect();
                            const midY = rect.top + rect.height / 2;
                            if (e.clientY < midY) {
                                list.insertBefore(draggedItem, item);
                            } else {
                                list.insertBefore(draggedItem, item.nextSibling);
                            }
                        }
                    });
                });
            });
        }
        
        function shuffleArray(arr) {
            const shuffled = [...arr];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function ordinal(n) {
            const s = ['th', 'st', 'nd', 'rd'];
            const v = n % 100;
            return n + (s[(v - 20) % 10] || s[v] || s[0]);
        }
        
        async function runWithLLM() {
            // Reset and run trace
            traceData = [];
            callStack = [];
            stats = { calls: 0, returns: 0, maxDepth: 0 };
            score = 0;
            totalQuizzes = 0;
            
            const code = document.getElementById('codeEditor').value;
            
            try {
                eval(code);
                
                document.getElementById('callCount').textContent = stats.calls;
                document.getElementById('returnCount').textContent = stats.returns;
                document.getElementById('maxDepth').textContent = stats.maxDepth;
                
                renderTrace();
                
                // Generate with LLM
                await generateWithLLM(code);
                
            } catch (e) {
                document.getElementById('traceOutput').innerHTML = 
                    `<div class="quiz-feedback feedback-incorrect">Error: ${e.message}</div>`;
            }
        }
        
        async function generateWithLLM(code) {
            const GROQ_API_KEY = process.env.GROQ_API_KEY || 'YOUR_GROQ_API_KEY_HERE';
            
            const output = document.getElementById('exerciseOutput');
            output.innerHTML = '<div class="empty-state">ü§ñ Generating AI questions...</div>';
            
            // Summarize trace for LLM
            const calls = traceData.filter(t => t.type === 'call');
            const returns = traceData.filter(t => t.type === 'return');
            const funcNames = [...new Set(calls.map(c => c.name))];
            
            const traceSummary = {
                functions: funcNames,
                totalCalls: calls.length,
                maxDepth: stats.maxDepth,
                callSequence: calls.slice(0, 10).map(c => `${c.name}(${c.args.join(',')})`),
                returnValues: returns.slice(0, 10).map(r => ({ func: r.name, value: r.value }))
            };
            
            const prompt = `You are a programming education expert. Given this code and its execution trace, generate 5 unique quiz questions to test understanding.

CODE:
\`\`\`
${code}
\`\`\`

EXECUTION TRACE SUMMARY:
- Functions called: ${traceSummary.functions.join(', ')}
- Total function calls: ${traceSummary.totalCalls}
- Maximum recursion depth: ${traceSummary.maxDepth}
- Call sequence (first 10): ${traceSummary.callSequence.join(' ‚Üí ')}
- Return values (sample): ${JSON.stringify(traceSummary.returnValues)}

Generate 5 varied questions. Mix these types:
1. Counting (how many calls, returns, etc.)
2. Sequence (what order did things happen)
3. Values (what was returned, what arguments)
4. Reasoning (why did X happen before Y)
5. Prediction (if input was Z, what would happen)

Return ONLY valid JSON array:
[
  {
    "type": "multiple_choice",
    "question": "...",
    "options": ["A", "B", "C", "D"],
    "correct": 0
  },
  {
    "type": "input",
    "question": "...",
    "answer": "..."
  }
]`;

            try {
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${GROQ_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'llama-3.1-8b-instant',
                        messages: [{ role: 'user', content: prompt }],
                        temperature: 0.7
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }
                
                const data = await response.json();
                const content = data.choices[0].message.content;
                
                // Parse JSON from response
                const jsonMatch = content.match(/\[[\s\S]*\]/);
                if (!jsonMatch) throw new Error('No JSON found in response');
                
                const questions = JSON.parse(jsonMatch[0]);
                renderLLMQuizzes(questions);
                
            } catch (e) {
                output.innerHTML = `<div class="quiz-feedback feedback-incorrect">LLM Error: ${e.message}</div>`;
            }
        }
        
        function renderLLMQuizzes(questions) {
            const output = document.getElementById('exerciseOutput');
            totalQuizzes = questions.length;
            document.getElementById('total').textContent = totalQuizzes;
            
            output.innerHTML = questions.map((q, i) => {
                const id = 'llm-quiz-' + i;
                
                if (q.type === 'multiple_choice') {
                    return `
                        <div class="quiz-card" id="${id}" data-correct="${q.correct}">
                            <div class="quiz-type">ü§ñ AI Generated - Multiple Choice</div>
                            <div class="quiz-question">${q.question}</div>
                            <div class="quiz-options">
                                ${q.options.map((opt, j) => `
                                    <div class="quiz-option" onclick="checkLLMAnswer('${id}', ${j}, this)">${opt}</div>
                                `).join('')}
                            </div>
                            <div class="quiz-feedback" style="display: none;"></div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="quiz-card" id="${id}" data-correct="${q.answer}">
                            <div class="quiz-type">ü§ñ AI Generated - Input</div>
                            <div class="quiz-question">${q.question}</div>
                            <input type="text" class="quiz-input" placeholder="Your answer...">
                            <button class="check-btn" onclick="checkLLMInput('${id}', this)">Check</button>
                            <div class="quiz-feedback" style="display: none;"></div>
                        </div>
                    `;
                }
            }).join('');
        }
        
        function checkLLMAnswer(quizId, selected, element) {
            const card = document.getElementById(quizId);
            if (card.classList.contains('correct') || card.classList.contains('incorrect')) return;
            
            const correct = parseInt(card.dataset.correct);
            const feedback = card.querySelector('.quiz-feedback');
            const options = card.querySelectorAll('.quiz-option');
            
            options[correct].classList.add('correct-answer');
            
            if (selected === correct) {
                card.classList.add('correct');
                element.classList.add('correct-answer');
                feedback.className = 'quiz-feedback feedback-correct';
                feedback.textContent = '‚úì Correct!';
                score++;
            } else {
                card.classList.add('incorrect');
                element.classList.add('wrong-answer');
                feedback.className = 'quiz-feedback feedback-incorrect';
                feedback.textContent = '‚úó Incorrect';
            }
            
            feedback.style.display = 'block';
            document.getElementById('score').textContent = score;
        }
        
        function checkLLMInput(quizId, btn) {
            const card = document.getElementById(quizId);
            if (card.classList.contains('correct') || card.classList.contains('incorrect')) return;
            
            const input = card.querySelector('.quiz-input');
            const correct = card.dataset.correct.toLowerCase().trim();
            const answer = input.value.toLowerCase().trim();
            const feedback = card.querySelector('.quiz-feedback');
            
            if (answer === correct || answer.includes(correct) || correct.includes(answer)) {
                card.classList.add('correct');
                feedback.className = 'quiz-feedback feedback-correct';
                feedback.textContent = '‚úì Correct!';
                score++;
            } else {
                card.classList.add('incorrect');
                feedback.className = 'quiz-feedback feedback-incorrect';
                feedback.textContent = `‚úó Incorrect. Answer: ${card.dataset.correct}`;
            }
            
            feedback.style.display = 'block';
            document.getElementById('score').textContent = score;
        }
    </script>
</body>
</html>
